{"pageProps":{"note":{"id":"f5ta5qp6kvcp8x23oxfjwi2","title":"Delta Lake","desc":"","updated":1693717299550,"created":1669726561783,"custom":{},"fname":"dev.data+ai.databricks.delta_lake","type":"note","vault":{"fsPath":".","selfContained":true,"name":"Dendron"},"contentHash":"abdc571178fea7bdcbc1200c6663302d","links":[{"type":"wiki","from":{"fname":"dev.data+ai.databricks.delta_lake","id":"f5ta5qp6kvcp8x23oxfjwi2","vaultName":"Dendron"},"value":"dev.cs.database.ACID","position":{"start":{"line":6,"column":11,"offset":149},"end":{"line":6,"column":35,"offset":173},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"dev.cs.database.ACID"}},{"type":"wiki","from":{"fname":"dev.data+ai.databricks.delta_lake","id":"f5ta5qp6kvcp8x23oxfjwi2","vaultName":"Dendron"},"value":"dev.data+ai.spark.structured_streaming","position":{"start":{"line":7,"column":32,"offset":229},"end":{"line":7,"column":74,"offset":271},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"dev.data+ai.spark.structured_streaming"}},{"type":"wiki","from":{"fname":"dev.data+ai.databricks.delta_lake","id":"f5ta5qp6kvcp8x23oxfjwi2","vaultName":"Dendron"},"value":"dev.data+ai.databricks.data_lakehouse","position":{"start":{"line":10,"column":15,"offset":373},"end":{"line":10,"column":56,"offset":414},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"dev.data+ai.databricks.data_lakehouse"}},{"type":"wiki","from":{"fname":"dev.data+ai.databricks.delta_lake","id":"f5ta5qp6kvcp8x23oxfjwi2","vaultName":"Dendron"},"value":"dev.data+ai.data_lake","position":{"start":{"line":21,"column":3,"offset":1027},"end":{"line":21,"column":28,"offset":1052},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"dev.data+ai.data_lake"}},{"from":{"fname":"dev.data+ai.databricks.data+ai-summit-2022-keynote-summary","id":"0wwj1byxg3uhkh6el05q2o9","vaultName":"Dendron"},"type":"backlink","position":{"start":{"line":5,"column":3,"offset":44},"end":{"line":5,"column":40,"offset":81},"indent":[]},"value":"dev.data+ai.databricks.delta_lake"}],"anchors":{"what":{"type":"header","text":"What","value":"what","line":8,"column":0,"depth":2},"why":{"type":"header","text":"WHY","value":"why","line":26,"column":0,"depth":2},"z-ordering":{"type":"header","text":"Z-ordering","value":"z-ordering","line":30,"column":0,"depth":2},"reference":{"type":"header","text":"Reference","value":"reference","line":39,"column":0,"depth":2}},"children":[],"parent":"skeuhenz2vf0ycgfmyy8pl1","data":{}},"body":"<h1 id=\"delta-lake\">Delta Lake<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#delta-lake\"></a></h1>\n<h2 id=\"what\">What<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#what\"></a></h2>\n<ul>\n<li>an open source ACID table storage layer over cloud object stores</li>\n<li>parquet 데이터 파일을 확장<br>\nㄴ How? transaction log를 추가하여 <br>\nㄴ So? <a href=\"/pks-publish/notes/i77f7bz5g58kgrwmzz5rf07\">ACID 트랜잭션</a>을 제공하고, 확장 가능한 메타데이터를 처리</li>\n<li>Apache Spark API 와 완벽하게 호환되며 <a href=\"/pks-publish/notes/cmfutyhgtl88lr1sike6zta\">Structured Streaming</a>과의 긴밀하게 통합됨\n<br>\nㄴ So? 일괄 처리 및 스트리밍 작업 모두에 단일 데이터 복사본을 쉽게 사용하고, 대규모 증분 처리를 제공할 수 있음</li>\n<li>Databricks의 <a href=\"/pks-publish/notes/2b76tsb8q0aqabl8uww9at1\">Data Lakehouse</a> 플랫폼에서는 데이터 및 테이블을 저장하기 위한 기반을 제공하는 최적화된 <code>스토리지 계층</code>으로 사용됨</li>\n</ul>\n<blockquote>\n<p>Delta Lake is an open source ACID table storage layer over cloud object stores initially\ndeveloped at Databricks. Delta Lake uses a transaction log that is\ncompacted into Apache Parquet format to provide ACID properties,\ntime travel, and significantly faster metadata operations for large\ntabular datasets (e.g., the ability to quickly search billions of table\npartitions for those relevant to a query). It also leverages this design to provide high-level features such as automatic data layout\noptimization, upserts, caching, and audit logs.</p>\n</blockquote>\n<h2 id=\"why\">WHY<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#why\"></a></h2>\n<ul>\n<li><a href=\"/pks-publish/notes/eja9cwc6rjfx4zrkmvrp8az\">Data Lake</a>는 Schema Enforcement, Data Quality, ACID Transaction 등을 지원하지 않음</li>\n<li>이러한 Data Lakes의 결점을 Delta Lake로 극복할 수 있음</li>\n</ul>\n<h2 id=\"z-ordering\">Z-ordering<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#z-ordering\"></a></h2>\n<ul>\n<li>Z-ordering is a technique to colocate related information in the same set of files. This co-locality is automatically used by Delta Lake on Databricks data-skipping algorithms. This behavior dramatically reduces the amount of data that Delta Lake on Databricks needs to read. </li>\n</ul>\n<pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">OPTIMIZE</span> events\n<span class=\"token keyword\">WHERE</span> <span class=\"token keyword\">date</span> <span class=\"token operator\">>=</span> <span class=\"token keyword\">current_timestamp</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> <span class=\"token keyword\">INTERVAL</span> <span class=\"token number\">1</span> <span class=\"token keyword\">day</span>\nZORDER <span class=\"token keyword\">BY</span> <span class=\"token punctuation\">(</span>eventType<span class=\"token punctuation\">)</span>\n</code></pre>\n<h2 id=\"reference\">Reference<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#reference\"></a></h2>\n<ul>\n<li><a href=\"https://learn.microsoft.com/en-us/azure/databricks/delta/\">https://learn.microsoft.com/en-us/azure/databricks/delta/</a></li>\n<li><a href=\"https://www.databricks.com/wp-content/uploads/2020/08/p975-armbrust.pdf\">https://www.databricks.com/wp-content/uploads/2020/08/p975-armbrust.pdf</a></li>\n<li><a href=\"https://www.linkedin.com/pulse/delta-lake-tables-umair-yelurkar\">https://www.linkedin.com/pulse/delta-lake-tables-umair-yelurkar</a></li>\n</ul>\n<hr>\n<strong>Backlinks</strong>\n<ul>\n<li><a href=\"/pks-publish/notes/0wwj1byxg3uhkh6el05q2o9\">Data+AI Summit 2022 키노트 주요 어나운스먼트 요약</a></li>\n</ul>","noteIndex":{"id":"rfaecb1r4pxpahsrighqpfi","title":"Dev","desc":"","updated":1666489926104,"created":1666489926104,"custom":{"nav_order":0,"permalink":"/"},"fname":"dev","type":"note","vault":{"fsPath":".","selfContained":true,"name":"Dendron"},"contentHash":"5f3d9b993bc1c60c0e10119b00a45c49","links":[],"anchors":{},"children":["vmcgt1bw13lwsobet50r3vl","pj0dbesw2qm5j1tub9f34pg","e40hlh2wukm75vo4t8r9c7p","7xwnx64er01irhu8wg1q5zm","4buyekecqhzdg87aqxmh1rz","n1xmefdyaaztqb8wmsmqtjj","d8p9jq81rc0pfbbuzz7prah","yq2839iijurmzkrwkqwo9ps","51sfhirev9l2r8bef9utfb9","xuw6kyksesfaatsmt3gctyi","njc2zpmxz8izls7ogwdj20h","d3ma1d2r59fhejrl6bn9g0e","tgd9pt1fu1j4ejm4g09vlx4","5jlkrg4hx6dpy5tr55grkh6","ockg1gb78gpshwty5zjmvue","owsm2ti22dslhpk9oduhhku","52x2zgp7jpygai1h0jpv0t8","2d5oqog2rsdfdogne54tq9t"],"parent":null,"data":{},"body":""},"collectionChildren":null,"customHeadContent":null,"config":{"version":5,"dev":{"enablePreviewV2":true,"enableSelfContainedVaults":true},"commands":{"lookup":{"note":{"selectionMode":"extract","confirmVaultOnCreate":true,"vaultSelectionModeOnCreate":"smart","leaveTrace":false,"bubbleUpCreateNew":true,"fuzzThreshold":0.2}},"randomNote":{},"insertNoteLink":{"aliasMode":"none","enableMultiSelect":false},"insertNoteIndex":{"enableMarker":false},"copyNoteLink":{"aliasMode":"title"},"templateHierarchy":"template"},"workspace":{"vaults":[{"fsPath":".","selfContained":true,"name":"Dendron"}],"journal":{"dailyDomain":"daily","name":"journal","dateFormat":"y.MM.dd","addBehavior":"childOfDomain"},"scratch":{"name":"scratch","dateFormat":"y.MM.dd.HHmmss","addBehavior":"asOwnDomain"},"task":{"name":"task","dateFormat":"y.MM.dd","addBehavior":"asOwnDomain","statusSymbols":{"":" ","wip":"w","done":"x","assigned":"a","moved":"m","blocked":"b","delegated":"l","dropped":"d","pending":"y"},"taskCompleteStatus":["done","x"],"prioritySymbols":{"H":"high","M":"medium","L":"low"},"todoIntegration":false,"createTaskSelectionType":"selection2link"},"graph":{"zoomSpeed":1,"createStub":false},"enableAutoCreateOnDefinition":false,"enableXVaultWikiLink":false,"enableRemoteVaultInit":true,"enableUserTags":true,"enableHashTags":true,"workspaceVaultSyncMode":"noCommit","enableAutoFoldFrontmatter":false,"enableEditorDecorations":true,"maxPreviewsCached":10,"maxNoteLength":204800,"enableFullHierarchyNoteTitle":false},"preview":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enableFrontmatterTags":true,"enableHashesForFMTags":false,"enablePrettyRefs":true,"enableKatex":true,"automaticallyShowPreview":false},"publishing":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enablePrettyRefs":true,"enableKatex":true,"copyAssets":true,"siteHierarchies":["dev","about"],"writeStubs":false,"siteRootDir":"docs","seo":{"title":"Golbang Hacker","description":"Personal Knowledge Space"},"github":{"enableEditLink":true,"editLinkText":"Edit this page on GitHub","editBranch":"main","editViewMode":"tree"},"enableSiteLastModified":true,"enableFrontmatterTags":true,"enableHashesForFMTags":false,"enableRandomlyColoredTags":true,"enableTaskNotes":true,"enablePrettyLinks":true,"searchMode":"search","assetsPrefix":"/pks-publish","siteUrl":"https://b2sdev.github.io","theme":"dark","siteFaviconPath":"favicon.ico","siteIndex":"dev"}}},"__N_SSG":true}