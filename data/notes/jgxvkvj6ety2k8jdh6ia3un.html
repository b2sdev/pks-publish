<h1 id="expectations">Expectations<a aria-hidden="true" class="anchor-heading icon-link" href="#expectations"></a></h1>
<h2 id="what">What<a aria-hidden="true" class="anchor-heading icon-link" href="#what"></a></h2>
<p><a href="/pks-publish/notes/hvd8818q6qo5xxfok5lhye7">Delta Live Tables</a>에서는 -데이터셋의 컨텐츠에 대해- 데이터 품질 제약조건(<a href="/pks-publish/notes/vtzfkb3yhrdf403l7lqwan9">Constraint</a>)을 지정하여 데이터 유효성(expectation)을 확보할 수 있음</p>
<h2 id="how">How<a aria-hidden="true" class="anchor-heading icon-link" href="#how"></a></h2>
<div class="table-responsive">




















<table><thead><tr><th><strong>Expectation</strong></th><th><strong>기대 동작</strong></th></tr></thead><tbody><tr><td>expect_all</td><td>유효성 검사에 실패한 레코드가 데이터 세트에 포함</td></tr><tr><td>expect_all_or_drop</td><td>유효성 검사에 실패한 레코드를 데이터 셋트에서 삭제</td></tr><tr><td>expect_all_or_fail</td><td>유효성 검사에 실패한 레코드가 있으면 파이프라인 실행을 중지</td></tr></tbody></table></div>
<h3 id="python">Python<a aria-hidden="true" class="anchor-heading icon-link" href="#python"></a></h3>
<pre class="language-python"><code class="language-python"><span class="token decorator annotation punctuation">@dlt<span class="token punctuation">.</span>expect</span><span class="token punctuation">(</span><span class="token string">"valid timestamp"</span><span class="token punctuation">,</span> <span class="token string">"col(“timestamp”) > '2012-01-01'"</span><span class="token punctuation">)</span>
<span class="token decorator annotation punctuation">@dlt<span class="token punctuation">.</span>expect_or_drop</span><span class="token punctuation">(</span><span class="token string">"valid_current_page"</span><span class="token punctuation">,</span> <span class="token string">"current_page_id IS NOT NULL AND current_page_title IS NOT NULL"</span><span class="token punctuation">)</span>
<span class="token decorator annotation punctuation">@dlt<span class="token punctuation">.</span>expect_or_fail</span><span class="token punctuation">(</span><span class="token string">"valid_count"</span><span class="token punctuation">,</span> <span class="token string">"count > 0"</span><span class="token punctuation">)</span>
</code></pre>
<h3 id="sql">SQL<a aria-hidden="true" class="anchor-heading icon-link" href="#sql"></a></h3>
<pre class="language-sql"><code class="language-SQL"><span class="token keyword">CONSTRAINT</span> valid_timestamp EXPECT <span class="token punctuation">(</span><span class="token keyword">timestamp</span> <span class="token operator">></span> <span class="token string">'2012-01-01'</span><span class="token punctuation">)</span>
<span class="token keyword">CONSTRAINT</span> valid_current_page EXPECT <span class="token punctuation">(</span>current_page_id <span class="token operator">IS</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token operator">and</span> current_page_title <span class="token operator">IS</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">)</span> <span class="token keyword">ON</span> VIOLATION <span class="token keyword">DROP</span> <span class="token keyword">ROW</span>
<span class="token keyword">CONSTRAINT</span> valid_count EXPECT <span class="token punctuation">(</span>count <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">ON</span> VIOLATION FAIL <span class="token keyword">UPDATE</span>
</code></pre>
<h2 id="reference">Reference<a aria-hidden="true" class="anchor-heading icon-link" href="#reference"></a></h2>
<ul>
<li><a href="https://docs.databricks.com/workflows/delta-live-tables/delta-live-tables-expectations.html">https://docs.databricks.com/workflows/delta-live-tables/delta-live-tables-expectations.html</a></li>
</ul>
<hr>
<strong>Backlinks</strong>
<ul>
<li><a href="/pks-publish/notes/vtzfkb3yhrdf403l7lqwan9">Constraint</a></li>
<li><a href="/pks-publish/notes/hvd8818q6qo5xxfok5lhye7">Delta Live Tables</a></li>
</ul>